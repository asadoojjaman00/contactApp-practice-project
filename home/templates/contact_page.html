{% extends "base.html" %}

{% block content %}
<section class="page-section">
    <div class="container">
        <div class="contact-header">
            <h2 class="page-title">My Contacts</h2>
            <a href="{% url 'add_contact' %}" class="add-contact-btn">
                <i class="fas fa-plus"></i> Add New Contact
            </a>
        </div>

        <!-- Search and Filter -->
        <div class="contact-tools">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <form method="GET" action="{% url 'contacts' %}">
                    <input type="text" name="q" class="search-input" placeholder="Search contacts..." value="{{ request.GET.q }}">
                </form>
            </div>
            <select class="filter-select" onchange="location = this.value;">
                <option value="{% url 'contacts' %}">All Contacts</option>
                <option value="{% url 'contacts' %}?filter=personal">Personal</option>
                <option value="{% url 'contacts' %}?filter=work">Work</option>
            </select>
        </div>
        
        <!-- Contacts Grid -->
        <div class="contacts-grid">
            {% for contact in contacts %}
            <div class="contact-card">
                <div class="card-header">
                    <div class="contact-name">{{ contact.name }}</div>
                    <div class="contact-role">{{ contact.company|default:"No Company" }}</div>
                </div>
                <div class="card-body">
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>{{ contact.email }}</span>
                        </div>
                        {% if contact.phone %}
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>{{ contact.phone }}</span>
                        </div>
                        {% endif %}
                        {% if contact.company %}
                        <div class="contact-item">
                            <i class="fas fa-building"></i>
                            <span>{{ contact.company }}</span>
                        </div>
                        {% endif %}
                    </div>
                    <div class="contact-actions">
                        <a href="{% url 'update_contact' contact.id %}" class="btn btn-edit">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                        <form method="POST" action="{% url 'delete_contact' contact.id %}" style="display: inline; flex: 1;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-delete" onclick="return confirm('Are you sure you want to delete this contact?')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <i class="fas fa-user-friends"></i>
                <h3>No contacts found</h3>
                <p>Get started by adding your first contact</p>
                <a href="{% url 'add_contact' %}" class="add-contact-btn" style="margin-top: 20px;">
                    <i class="fas fa-plus"></i> Add New Contact
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}